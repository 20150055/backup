(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["new-repository"],{"38ec":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"600px",scrollable:""},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[o("v-card",[o("v-card-title",{staticClass:"accent"},[o("v-layout",{attrs:{column:""}},[o("span",{staticClass:"headline"},[e._v(e._s(e.$t("folder-selector.select-folder")))]),o("div",{},[e._v(e._s(e.chosenLocation||e.$t("folder-selector.no-selection")))])]),o("v-spacer"),o("v-btn",{attrs:{icon:""},on:{click:e.refreshBrowser}},[o("v-icon",[e._v("mdi-refresh")])],1)],1),o("v-card-text",[o("file-browser",{ref:"fileBrowser",staticClass:"elevation-0",attrs:{"hide-chrome":"","hide-selection":"","folder-only":""},model:{value:e.chosenLocations,callback:function(t){e.chosenLocations=t},expression:"chosenLocations"}})],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"accent",flat:""},nativeOn:{click:function(t){e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.close")))]),o("v-btn",{attrs:{color:"accent",flat:"",disabled:!e.chosenLocation},nativeOn:{click:function(t){e.$emit("folder-selected",e.chosenLocation),e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.confirm")))])],1)],1)],1)},r=[],i=o("a34a"),a=o.n(i);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,o){return t&&c(e.prototype,t),o&&c(e,o),e}function u(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var v=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===("undefined"===typeof Reflect?"undefined":h(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},m=function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":h(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},b=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n["throw"](e))}catch(t){i(t)}}function c(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});var w=o("60a3"),g=o("4796"),k=function(e){function t(){var e;return s(this,t),e=u(this,f(t).apply(this,arguments)),e.chosenLocations=[],e}return d(t,e),l(t,[{key:"onOpen",value:function(){return b(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isOpen){e.next=4;break}return e.next=3,this.$refs.fileBrowser.manuallySetFolders([]);case 3:this.initialLocation&&this.onInitialLocationChange();case 4:case"end":return e.stop()}},e,this)}))}},{key:"onInitialLocationChange",value:function(){return b(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.initialLocation){e.next=10;break}if(this.chosenLocations=[this.initialLocation],!this.$refs.fileBrowser){e.next=8;break}return e.next=5,this.$refs.fileBrowser.manuallySetFolders([this.initialLocation]);case 5:return e.next=7,this.$refs.fileBrowser.openFolder(this.initialLocation);case 7:this.chosenLocations=[this.initialLocation];case 8:e.next=11;break;case 10:this.chosenLocations=[];case 11:case"end":return e.stop()}},e,this)}))}},{key:"refreshBrowser",value:function(){return b(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$refs.fileBrowser){e.next=7;break}return e.next=3,this.$refs.fileBrowser.refreshBrowser();case 3:return e.next=5,this.$refs.fileBrowser.manuallySetFolders([this.chosenLocation||this.initialLocation]);case 5:return e.next=7,this.$refs.fileBrowser.openFolder(this.chosenLocation||this.initialLocation);case 7:case"end":return e.stop()}},e,this)}))}},{key:"isOpen",get:function(){return this.value},set:function(e){this.$emit("input",e)}},{key:"chosenLocation",get:function(){return this.chosenLocations[0]||!1}}]),t}(w.Mixins());v([w.Prop({type:[Boolean],required:!0}),m("design:type",Boolean)],k.prototype,"value",void 0),v([w.Prop({type:String,default:""}),m("design:type",String)],k.prototype,"initialLocation",void 0),v([w.Watch("isOpen"),m("design:type",Function),m("design:paramtypes",[]),m("design:returntype",Promise)],k.prototype,"onOpen",null),v([w.Watch("initialLocation",{immediate:!0}),m("design:type",Function),m("design:paramtypes",[]),m("design:returntype",Promise)],k.prototype,"onInitialLocationChange",null),k=v([w.Component({components:{FileBrowser:g.default}})],k),exports.default=k;var x=void 0,O=o("2877"),S=o("6544"),L=o.n(S),$=o("8336"),R=o("b0af"),_=o("99d9"),K=o("12b2"),j=o("169a"),P=o("132d"),D=o("a722"),T=o("9910"),A=Object(O["a"])(x,n,r,!1,null,null,null);t["default"]=A.exports;L()(A,{VBtn:$["a"],VCard:R["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:K["a"],VDialog:j["a"],VIcon:P["a"],VLayout:D["a"],VSpacer:T["a"]})},cf2a:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-select",{attrs:{items:e.repositoryTypes,label:e.$t("repository-editor.repository-type"),required:"",rules:e.validateRules.repoType},model:{value:e.repoType,callback:function(t){e.repoType=t},expression:"repoType"}}),o("v-text-field",{attrs:{rules:e.validateRules.name,counter:e.maxNameLength,label:e.$t("repository-editor.name"),required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),o("v-text-field",{attrs:{rules:e.validateRules.password,counter:e.maxPasswordLength,label:e.$t("repository-editor.password"),required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("v-text-field",{attrs:{rules:e.validateRules.location,label:e.$t("repository-editor.location"),required:"",placeholder:e.isLocalRepository?"C:/path/to/repository":"http://localhost:9000/backup-bucket"},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),e.isLocalRepository?o("v-btn",{on:{click:function(t){e.locationSelectorOpen=!0}}},[e._v(e._s(e.$t("repository-editor.select-location")))]):e._e(),o("folder-selector-dialog",{attrs:{initialLocation:e.location},on:{"folder-selected":function(t){e.location=t}},model:{value:e.locationSelectorOpen,callback:function(t){e.locationSelectorOpen=t},expression:"locationSelectorOpen"}}),o("v-slide-y-transition",{attrs:{group:""}},[e.isLocalRepository?e._e():o("v-text-field",{key:"s3AccessKey",attrs:{counter:20,rules:e.validateRules.s3AccessKey,label:e.$t("repository-editor.s3-access-key"),required:"",placeholder:"S3EX4MPL3KEYASDFGHJK"},model:{value:e.s3AccessKey,callback:function(t){e.s3AccessKey=t},expression:"s3AccessKey"}}),e.isLocalRepository?e._e():o("v-text-field",{key:"s3SecretKey",attrs:{counter:40,rules:e.validateRules.s3SecretKey,label:e.$t("repository-editor.s3-secret-key"),required:"",type:"password",placeholder:"aS3exaMPLeSeCRE7ACCessK3y+qWertYuI/pzyxC"},model:{value:e.s3SecretKey,callback:function(t){e.s3SecretKey=t},expression:"s3SecretKey"}})],1),o("v-text-field",{attrs:{rules:e.validateRules.autoUnlockDelay,label:e.$t("repository-editor.auto-unlock-delay"),required:""},model:{value:e.autoUnlockDelay,callback:function(t){e.autoUnlockDelay=t},expression:"autoUnlockDelay"}}),o("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v(e._s(e.$t("common.interaction.submit")))]),o("v-btn",{on:{click:e.clear}},[e._v(e._s(e.$t("common.interaction.reset")))])],1)},r=[],i=o("a34a"),a=o.n(i);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,o){return t&&c(e.prototype,t),o&&c(e,o),e}function u(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function h(e){return h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var v,m,b=function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===("undefined"===typeof Reflect?"undefined":h(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},w=function(e,t){if("object"===("undefined"===typeof Reflect?"undefined":h(Reflect))&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{c(n.next(e))}catch(t){i(t)}}function s(e){try{c(n["throw"](e))}catch(t){i(t)}}function c(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,s)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});var k=o("60a3"),x=o("f90c"),O=o("845e"),S=o("38ec"),L=function(e){function t(){var e;return s(this,t),e=u(this,f(t).apply(this,arguments)),e.maxNameLength=100,e.maxPasswordLength=100,e.valid=!0,e.name="",e.password="",e.location="",e.s3AccessKey="",e.s3SecretKey="",e.repoType=O.RepoType.S3,e.autoUnlockDelay=100,e.locationSelectorOpen=!1,e}return d(t,e),l(t,[{key:"trimAccessKey",value:function(){this.s3AccessKey.length>20&&(this.s3AccessKey=this.s3AccessKey.substr(0,20))}},{key:"trimSecretKey",value:function(){this.s3SecretKey.length>40&&(this.s3SecretKey=this.s3SecretKey.substr(0,40))}},{key:"updateLocalData",value:function(){this.name=this.initialData.name,this.password=this.initialData.password,this.location=this.initialData.location,this.s3AccessKey=this.initialData.s3AccessKey,this.s3SecretKey=this.initialData.s3SecretKey,this.repoType=this.initialData.type,this.autoUnlockDelay=this.initialData.autoUnlockDelay}},{key:"submit",value:function(){return g(this,void 0,void 0,a.a.mark(function e(){return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.form.validate()&&this.formSubmit({name:this.name,password:this.password,location:this.location,s3AccessKey:this.s3AccessKey,s3SecretKey:this.s3SecretKey,id:this.initialData.id,type:this.repoType,autoUnlockDelay:this.autoUnlockDelay});case 1:case"end":return e.stop()}},e,this)}))}},{key:"formSubmit",value:function(e){}},{key:"clear",value:function(){return g(this,void 0,void 0,a.a.mark(function e(){var t=this;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$nextTick(function(){t.updateLocalData()});case 1:case"end":return e.stop()}},e,this)}))}},{key:"isLocalRepository",get:function(){return this.repoType===O.RepoType.Local}},{key:"repositoryTypes",get:function(){return[{text:this.$t("repository-editor.type.s3"),value:O.RepoType.S3},{text:this.$t("repository-editor.type.local"),value:O.RepoType.Local}]}},{key:"validateRules",get:function(){var e=this;return{s3AccessKey:[function(t){return!!t||e.$t("repository-editor.s3-access-key-required")},function(t){return t&&/^([A-Z0-9]{20})$/g.test(t)||e.$t("repository-editor.s3-access-key-invalid")}],s3SecretKey:[function(t){return!!t||e.$t("repository-editor.s3-secret-key-required")},function(t){return t&&/^([A-Za-z0-9\/+=]{40})$/g.test(t)||e.$t("repository-editor.s3-secret-key-invalid")}],location:[function(t){return!!t||e.$t("repository-editor.location-required")},function(t){return e.isLocalRepository||t&&x.isURL(t,{require_tld:!1})||e.$t("repository-editor.invalid-url")}],password:[function(t){return!!t||e.$t("repository-editor.password-required")},function(t){return t&&t.length<=e.maxPasswordLength||e.$t("repository-editor.password-length",{length:e.maxPasswordLength})}],name:[function(t){return!!t||e.$t("repository-editor.name-required")},function(t){return t&&t.length<=e.maxNameLength||e.$t("repository-editor.name-length",{length:e.maxPasswordLength})}],repoType:[function(t){return!!t||e.$t("repository-editor.type-required")}],autoUnlockDelay:[function(t){return!!t||e.$t("repository-editor.auto-unlock-delay-required")}]}}}]),t}(k.Mixins());b([k.Watch("s3AccessKey"),w("design:type",Function),w("design:paramtypes",[]),w("design:returntype",void 0)],L.prototype,"trimAccessKey",null),b([k.Watch("s3SecretKey"),w("design:type",Function),w("design:paramtypes",[]),w("design:returntype",void 0)],L.prototype,"trimSecretKey",null),b([k.Prop({type:Object,default:function(){return{name:"",password:"",location:"",s3AccessKey:"",s3SecretKey:"",type:O.RepoType.S3,autoUnlockDelay:100}}}),w("design:type","function"===typeof(v="undefined"!==typeof RepositoryOptionalId&&RepositoryOptionalId)?v:Object)],L.prototype,"initialData",void 0),b([k.Watch("initialData",{immediate:!0}),w("design:type",Function),w("design:paramtypes",[]),w("design:returntype",void 0)],L.prototype,"updateLocalData",null),b([k.Emit("form-submit"),w("design:type",Function),w("design:paramtypes",["function"===typeof(m="undefined"!==typeof RepositoryOptionalId&&RepositoryOptionalId)?m:Object]),w("design:returntype",void 0)],L.prototype,"formSubmit",null),L=b([k.Component({components:{FolderSelectorDialog:S.default}})],L),exports.default=L;var $=void 0,R=o("2877"),_=o("6544"),K=o.n(_),j=o("8336"),P=o("4bd4"),D=o("b56d"),T=o("0789"),A=o("2677"),C=Object(R["a"])($,n,r,!1,null,null,null);t["a"]=C.exports;K()(C,{VBtn:j["a"],VForm:P["a"],VSelect:D["a"],VSlideYTransition:T["g"],VTextField:A["a"]})},e107:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ma-4"},[o("repository-editor",{on:{"form-submit":e.onSubmit}})],1)},r=[],i=o("9ab4"),a=o("60a3"),s=o("cf2a"),c=o("f33f"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i["d"](t,e),t.prototype.onSubmit=function(e){return i["b"](this,void 0,void 0,function(){var t;return i["e"](this,function(o){switch(o.label){case 0:return[4,c["repositoriesModule"].createRepository(e)];case 1:return t=o.sent(),t&&t.payload&&this.$router.replace({path:"/repositories/"+t.payload.repo.id}),[2]}})})},t=i["c"]([Object(a["Component"])({components:{RepositoryEditor:s["a"]}})],t),t}(Object(a["Mixins"])()),u=l,p=u,f=o("2877"),d=Object(f["a"])(p,n,r,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=new-repository.8f1d3eb2.js.map