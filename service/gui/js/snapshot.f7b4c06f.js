(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["snapshot"],{"1d28":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":p(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var f=n("60a3"),h=n("05e1"),b=function(e){function t(){return r(this,t),a(this,c(t).apply(this,arguments))}return l(t,e),i(t,[{key:"$relativeDate",value:function(e){return h.relativeDate(e)}}]),t}(f.Vue);b=d([f.Component({components:{}})],b),t.DateFormatter=b},"38ec":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{"max-width":"600px",scrollable:""},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[n("v-card",[n("v-card-title",{staticClass:"accent"},[n("v-layout",{attrs:{column:""}},[n("span",{staticClass:"headline"},[e._v(e._s(e.$t("folder-selector.select-folder")))]),n("div",{},[e._v(e._s(e.chosenLocation||e.$t("folder-selector.no-selection")))])])],1),n("v-card-text",[n("file-browser",{ref:"fileBrowser",staticClass:"elevation-0",attrs:{"hide-chrome":"","hide-selection":"","folder-only":""},model:{value:e.chosenLocations,callback:function(t){e.chosenLocations=t},expression:"chosenLocations"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"accent",flat:""},nativeOn:{click:function(t){e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.close")))]),n("v-btn",{attrs:{color:"accent",flat:"",disabled:!e.chosenLocation},nativeOn:{click:function(t){e.$emit("folder-selected",e.chosenLocation),e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.confirm")))])],1)],1)],1)},o=[],i=n("9ab4"),a=n("60a3"),s=n("4796"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chosenLocations=[],t}return i["d"](t,e),t.prototype.onOpen=function(){this.isOpen&&this.$refs.fileBrowser.manuallySetFolders([])},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.value},set:function(e){this.$emit("input",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chosenLocation",{get:function(){return this.chosenLocations[0]||!1},enumerable:!0,configurable:!0}),i["c"]([Object(a["Prop"])({type:[Boolean],required:!0})],t.prototype,"value",void 0),i["c"]([Object(a["Watch"])("isOpen")],t.prototype,"onOpen",null),t=i["c"]([Object(a["Component"])({components:{FileBrowser:s["a"]}})],t),t}(Object(a["Mixins"])()),l=c,u=l,p=n("2877"),d=n("6544"),f=n.n(d),h=n("8336"),b=n("b0af"),m=n("99d9"),v=n("12b2"),g=n("169a"),y=n("a722"),O=n("9910"),_=Object(p["a"])(u,r,o,!1,null,null,null);t["a"]=_.exports;f()(_,{VBtn:h["a"],VCard:b["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:v["a"],VDialog:g["a"],VLayout:y["a"],VSpacer:O["a"]})},"411e":function(e,t,n){"use strict";var r=n("9ab4"),o=n("60a3"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"fill-height":"","justify-center":"","align-center":"",column:""}},[n("logo",{attrs:{loader:""}}),n("div",{staticStyle:{"min-width":"200px","flex-grow":"0"}},[n("v-progress-linear",{attrs:{value:100*e.value,indeterminate:e.indeterminate||e.automaticIndeterminate,color:"accent"}})],1)],1)},a=[],s=n("ee1b"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["d"](t,e),Object.defineProperty(t.prototype,"automaticIndeterminate",{get:function(){return this.value>.99},enumerable:!0,configurable:!0}),r["c"]([Object(o["Prop"])({type:Number,default:0,validator:function(e){return e>=0&&e<=1}})],t.prototype,"value",void 0),r["c"]([Object(o["Prop"])({type:Boolean,default:!1})],t.prototype,"indeterminate",void 0),t=r["c"]([Object(o["Component"])({components:{Logo:s["a"]}})],t),t}(Object(o["Mixins"])()),l=c,u=l,p=n("2877"),d=n("6544"),f=n.n(d),h=n("a722"),b=n("8e36"),m=Object(p["a"])(u,i,a,!1,null,null,null),v=m.exports;f()(m,{VLayout:h["a"],VProgressLinear:b["a"]}),n.d(t,"a",function(){return g});var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentLoadingPercentage=1,t.shouldFinishLoading=!1,t}return r["d"](t,e),Object.defineProperty(t.prototype,"currentlyLoading",{get:function(){return this.currentLoadingPercentage<1},enumerable:!0,configurable:!0}),t.prototype.setLoading=function(e){e?(this.currentLoadingPercentage=0,this.shouldFinishLoading=!1):this.shouldFinishLoading=!0},t.prototype.updateLoadingPercentage=function(){var e=this;this.currentlyLoading&&setTimeout(function(){e.currentLoadingPercentage+=e.shouldFinishLoading?.3:Math.random()*(.1*(1-e.currentLoadingPercentage)),e.shouldFinishLoading&&(e.currentLoadingPercentage=Math.max(.99,e.currentLoadingPercentage)),e.currentlyLoading&&e.updateLoadingPercentage()},this.shouldFinishLoading?500:200*Math.random())},r["c"]([Object(o["Watch"])("currentlyLoading")],t.prototype,"updateLoadingPercentage",null),t=r["c"]([Object(o["Component"])({components:{FullscreenLoader:v}})],t),t}(o["Vue"])},"421b":function(e,t,n){"use strict";n.r(t);var r=n("f136");n.d(t,"LanguageUpdaterMixin",function(){return r["a"]});var o=n("411e");n.d(t,"LoadingScreen",function(){return o["a"]});var i=n("47dc");for(var a in i)["LanguageUpdaterMixin","LoadingScreen","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return i[e]})}(a);var s=n("10d5");n.d(t,"ThemeUpdaterMixin",function(){return s["a"]});var c=n("1d28");for(var a in c)["LanguageUpdaterMixin","LoadingScreen","ThemeUpdaterMixin","default"].indexOf(a)<0&&function(e){n.d(t,e,function(){return c[e]})}(a);var l=n("5707");n.d(t,"FileIcons",function(){return l["a"]})},"47dc":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function p(e){return p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var d=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"===typeof Reflect?"undefined":p(Reflect))&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(t,"__esModule",{value:!0});var f=n("60a3"),h=function(e){function t(){return r(this,t),a(this,c(t).apply(this,arguments))}return l(t,e),i(t,[{key:"ordinal",value:function(e){if("de"===this.$i18n.locale)return"".concat(e,".");var t=e%10,n=e%100;return"".concat(e,1===t&&11!==n?"st":2===t&&12!==n?"nd":3===t&&13!==n?"rd":"th")}}]),t}(f.Vue);h=d([f.Component({components:{}})],h),t.OrdinalMixin=h},5707:function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n("9ab4"),o=n("60a3"),i="mdi-file-image",a="mdi-file-account",s="mdi-file-excel",c="mdi-file-lock",l="mdi-file-music",u="mdi-file-pdf",p="mdi-file-powerpoint",d="mdi-file-video",f="mdi-file-word",h="mdi-file-xml",b="mdi-file-table",m="mdi-file-document",v="mdi-file-move",g="mdi-console",y="mdi-zip-box",O={png:i,jpg:i,jpeg:i,gif:i,bashrc:a,xlsx:s,xls:s,lock:c,mp3:l,wav:l,m4a:l,pdf:u,pptx:p,ppt:p,mp4:d,webm:d,docx:f,doc:f,xml:h,html:h,htm:h,php:h,db:b,txt:m,log:m,yml:m,yaml:m,md:m,ini:b,lnk:v,exe:g,dll:g,jar:g,bat:g,sh:g,zip:y,gz:y,"7z":y},_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r["d"](t,e),t.prototype.$getFileIcon=function(e){var t=e.split(".").pop()||"";return O[t]||"mdi-file"},t=r["c"]([Object(o["Component"])({components:{}})],t),t}(o["Vue"])},"68c7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.currentlyLoading?n("fullscreen-loader",{attrs:{value:e.currentLoadingPercentage}}):n("div",{staticClass:"ma-4"},[n("v-card",[n("v-card-title",[n("span",{staticClass:"mr-2"},[e._v(e._s(e.$t("snapshot.snapshot"))+" "+e._s(e.snapshotId))]),n("v-chip",{attrs:{outline:"",label:"",disabled:"",color:"accent"}},[e._v(e._s(e.repoName))])],1),n("v-card-text",[n("v-list",[n("v-list-tile",[n("v-list-tile-title",[e._v(e._s(e.$t("snapshot.date")))]),n("v-list-tile-sub-title",[e._v(e._s(e.$d(e.details.date))+" ("+e._s(e.$relativeDate(e.details.date))+")")])],1)],1)],1)],1),n("v-card",{staticClass:"mt-3"},[n("v-progress-linear",{staticClass:"ma-0",attrs:{value:e.restoreRunning?e.restoreProgress:0}}),n("v-card-title",{staticClass:"pt-1"},[n("span",{staticClass:"mr-2"},[e._v(e._s(e.$t("snapshot.files.files-in-snapshot")))]),n("v-chip",{attrs:{small:""}},[e._v(e._s(e.selectedFiles.length)+" / "+e._s(e.details.files.length)+" "+e._s(e.$t("snapshot.files.selected")))]),n("v-spacer"),n("v-btn",{attrs:{large:"",color:"accent",disabled:!e.selectedFiles.length||e.restoreRunning,outline:""},on:{click:function(t){e.restoreTargetSelectorOpen=!0}}},[n("v-icon",{attrs:{left:""}},[e._v("mdi-backup-restore")]),e._v("\n        "+e._s(e.$t("snapshot.restore-now"))+"\n      ")],1)],1),n("v-card-text",[n("v-scale-transition",{attrs:{group:""}},e._l(e.dedupedSelectedFiles,function(t){return n("v-chip",{key:t,attrs:{close:""},on:{input:function(n){return e.removeSubtree(t)}}},[e._v(e._s(t))])}),1)],1),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!e.restoreRunning,expression:"!restoreRunning"}]},[n("v-treeview",{attrs:{items:e.snapshotTree,"selected-color":"accent","open-on-click":"",selectable:"","item-key":"fullPath","loading-icon":"mdi-loading","expand-icon":"mdi-chevron-down","on-icon":"mdi-checkbox-marked","off-icon":"mdi-checkbox-blank-outline","indeterminate-icon":"mdi-checkbox-intermediate"},scopedSlots:e._u([{key:"prepend",fn:function(t){var r=t.item,o=t.open;return[r.children&&r.children.length?n("v-icon",[e._v(e._s(o?"mdi-folder-open":"mdi-folder"))]):n("v-icon",[e._v(e._s(e.$getFileIcon(r.name)))])]}}]),model:{value:e.selectedFiles,callback:function(t){e.selectedFiles=t},expression:"selectedFiles"}})],1),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:e.restoreRunning,expression:"restoreRunning"}]},[n("p",[e._v(e._s(e.$t("snapshot.restoring-to",{path:e.restorePath})))])])],1),n("folder-selector-dialog",{on:{"folder-selected":e.restoreToFolder},model:{value:e.restoreTargetSelectorOpen,callback:function(t){e.restoreTargetSelectorOpen=t},expression:"restoreTargetSelectorOpen"}})],1)},o=[],i=n("9ab4"),a=n("60a3"),s=n("f33f"),c=n("da9e"),l=n("8fb8"),u=n("421b"),p=n("df7c"),d=n("38ec"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.restoreTargetSelectorOpen=!1,t.restoreProgress=100,t.restorePath=null,t.details=!1,t.selectedFiles=[],t}return i["d"](t,e),Object.defineProperty(t.prototype,"restoreRunning",{get:function(){return this.restoreProgress<100},enumerable:!0,configurable:!0}),t.prototype.onProgressChange=function(){var e=this;setTimeout(function(){requestAnimationFrame(function(){e.restoreRunning?(e.restoreProgress+=4*Math.random(),e.restoreProgress*=1.1):100!==e.restoreProgress&&(e.restoreProgress=100)})},1e3*Math.random())},t.prototype.resetSelection=function(){this.restoreRunning||(this.selectedFiles=[])},t.prototype.restoreToFolder=function(e){this.restoreProgress=1,this.restorePath=e},Object.defineProperty(t.prototype,"dedupedSelectedFiles",{get:function(){for(var e={},t=this.selectedFiles.slice().sort(function(e,t){return e.split("/").length-t.split("/").length}),n=0;n<t.length;++n){for(var r=t[n],o=!1;;){if(r=p["dirname"](r),"/"===r)break;if(e[r]){o=!0;break}}o||(e[t[n]]=!0)}return Object.keys(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repoId",{get:function(){return Number(s["routerModule"].params.repositoryId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapshotId",{get:function(){return s["routerModule"].params.snapshotId},enumerable:!0,configurable:!0}),t.prototype.created=function(){this.setLoading(!0)},t.prototype.mounted=function(){return i["b"](this,void 0,void 0,function(){var e;return i["e"](this,function(t){switch(t.label){case 0:return[4,s["repositoriesModule"].getSnapshotDetails(this.repoId,this.snapshotId)];case 1:return e=t.sent(),e.payload&&(this.details=e.payload.details),this.setLoading(!1),[2]}})})},Object.defineProperty(t.prototype,"repoName",{get:function(){var e=s["repositoriesModule"].getById(this.repoId);return e&&e.name||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapshotTree",{get:function(){if(!this.details)return!1;for(var e=[],t=[e],n=this.details.files,r=0;r<n.length;++r){var o=n[r],i=n[r+1],a=i&&i.path.startsWith(o.path),s=o.path.split("/").length-2,c={name:p["basename"](o.path),fullPath:o.path,children:a?[]:void 0};a&&(t[s+1]=c.children),t[s].push(c)}return e},enumerable:!0,configurable:!0}),t.prototype.removeSubtree=function(e){this.selectedFiles=this.selectedFiles.filter(function(t){return!t.startsWith(e+"/")&&t!==e})},i["c"]([Object(a["Watch"])("restoreProgress")],t.prototype,"onProgressChange",null),i["c"]([Object(a["Watch"])("restoreProgress")],t.prototype,"resetSelection",null),t=i["c"]([Object(a["Component"])({components:{Timeline:c["a"],SnapshotsList:l["a"],FolderSelectorDialog:d["a"]}})],t),t}(Object(a["Mixins"])(u["LoadingScreen"],u["DateFormatter"],u["FileIcons"])),h=f,b=h,m=n("2877"),v=n("6544"),g=n.n(v),y=n("8336"),O=n("b0af"),_=n("99d9"),P=n("12b2"),j=n("cc20"),L=n("132d"),x=n("8860"),w=n("ba95"),S=n("5d23"),T=n("8e36"),V=n("0789"),F=n("9910"),k=n("eb2a"),C=Object(m["a"])(b,r,o,!1,null,null,null);t["default"]=C.exports;g()(C,{VBtn:y["a"],VCard:O["a"],VCardText:_["b"],VCardTitle:P["a"],VChip:j["a"],VIcon:L["a"],VList:x["a"],VListTile:w["a"],VListTileSubTitle:S["b"],VListTileTitle:S["c"],VProgressLinear:T["a"],VScaleTransition:V["d"],VSpacer:F["a"],VTreeview:k["a"]})},"8fb8":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{"three-line":""}},e._l(e.detailedSnapshots,function(t,r){return n("v-list-tile",{key:r,attrs:{to:"/repositories/"+e.repoId+"/snapshots/"+t.id,avatar:"",ripple:""}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(e.$d(t.date,"long"))+" ("+e._s(t.relativeDate)+")")]),n("v-list-tile-sub-title",e._l(t.tags,function(t,r){return n("v-chip",{key:r,attrs:{outline:"",label:"",disabled:"",color:"accent"}},[e._v(e._s(t))])}),1)],1)],1)}),1)},o=[],i=n("9ab4"),a=n("60a3"),s=n("421b"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i["d"](t,e),Object.defineProperty(t.prototype,"detailedSnapshots",{get:function(){var e=this;return this.snapshots.map(function(t){return i["a"]({},t,{relativeDate:e.$relativeDate(t.date)})})},enumerable:!0,configurable:!0}),i["c"]([Object(a["Prop"])({type:Array,default:function(){return[]}})],t.prototype,"snapshots",void 0),i["c"]([Object(a["Prop"])({type:[String,Number],required:!0})],t.prototype,"repoId",void 0),t=i["c"]([Object(a["Component"])({components:{}})],t),t}(Object(a["Mixins"])(s["DateFormatter"])),l=c,u=l,p=n("2877"),d=n("6544"),f=n.n(d),h=n("cc20"),b=n("8860"),m=n("ba95"),v=n("5d23"),g=Object(p["a"])(u,r,o,!1,null,null,null);t["a"]=g.exports;f()(g,{VChip:h["a"],VList:b["a"],VListTile:m["a"],VListTileContent:v["a"],VListTileSubTitle:v["b"],VListTileTitle:v["c"]})}}]);
//# sourceMappingURL=snapshot.f7b4c06f.js.map