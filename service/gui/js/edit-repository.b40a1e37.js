(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit-repository"],{"38ec":function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"600px",scrollable:""},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[o("v-card",[o("v-card-title",{staticClass:"accent"},[o("v-layout",{attrs:{column:""}},[o("span",{staticClass:"headline"},[e._v(e._s(e.$t("folder-selector.select-folder")))]),o("div",{},[e._v(e._s(e.chosenLocation||e.$t("folder-selector.no-selection")))])]),o("v-spacer"),o("v-btn",{attrs:{icon:""},on:{click:e.refreshBrowser}},[o("v-icon",[e._v("mdi-refresh")])],1)],1),o("v-card-text",[o("file-browser",{ref:"fileBrowser",staticClass:"elevation-0",attrs:{"hide-chrome":"","hide-selection":"","folder-only":""},model:{value:e.chosenLocations,callback:function(t){e.chosenLocations=t},expression:"chosenLocations"}})],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"accent",flat:""},nativeOn:{click:function(t){e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.close")))]),o("v-btn",{attrs:{color:"accent",flat:"",disabled:!e.chosenLocation},nativeOn:{click:function(t){e.$emit("folder-selected",e.chosenLocation),e.isOpen=!1}}},[e._v(e._s(e.$t("common.interaction.confirm")))])],1)],1)],1)},r=[],n=o("9ab4"),s=o("60a3"),a=o("4796"),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chosenLocations=[],t}return n["d"](t,e),t.prototype.onOpen=function(){return n["b"](this,void 0,void 0,function(){return n["e"](this,function(e){switch(e.label){case 0:return this.isOpen?[4,this.$refs.fileBrowser.manuallySetFolders([])]:[3,2];case 1:e.sent(),this.initialLocation&&this.onInitialLocationChange(),e.label=2;case 2:return[2]}})})},t.prototype.onInitialLocationChange=function(){return n["b"](this,void 0,void 0,function(){return n["e"](this,function(e){switch(e.label){case 0:return this.initialLocation?(this.chosenLocations=[this.initialLocation],this.$refs.fileBrowser?[4,this.$refs.fileBrowser.manuallySetFolders([this.initialLocation])]:[3,3]):[3,4];case 1:return e.sent(),[4,this.$refs.fileBrowser.openFolder(this.initialLocation)];case 2:e.sent(),this.chosenLocations=[this.initialLocation],e.label=3;case 3:return[3,5];case 4:this.chosenLocations=[],e.label=5;case 5:return[2]}})})},Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.value},set:function(e){this.$emit("input",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chosenLocation",{get:function(){return this.chosenLocations[0]||!1},enumerable:!0,configurable:!0}),t.prototype.refreshBrowser=function(){return n["b"](this,void 0,void 0,function(){return n["e"](this,function(e){switch(e.label){case 0:return this.$refs.fileBrowser?[4,this.$refs.fileBrowser.refreshBrowser()]:[3,4];case 1:return e.sent(),[4,this.$refs.fileBrowser.manuallySetFolders([this.chosenLocation||this.initialLocation])];case 2:return e.sent(),[4,this.$refs.fileBrowser.openFolder(this.chosenLocation||this.initialLocation)];case 3:e.sent(),e.label=4;case 4:return[2]}})})},n["c"]([Object(s["e"])({type:[Boolean],required:!0})],t.prototype,"value",void 0),n["c"]([Object(s["e"])({type:String,default:""})],t.prototype,"initialLocation",void 0),n["c"]([Object(s["g"])("isOpen")],t.prototype,"onOpen",null),n["c"]([Object(s["g"])("initialLocation",{immediate:!0})],t.prototype,"onInitialLocationChange",null),t=n["c"]([Object(s["a"])({components:{FileBrowser:a["a"]}})],t),t}(Object(s["d"])()),l=c,u=l,p=o("2877"),d=o("6544"),y=o.n(d),f=o("8336"),h=o("b0af"),b=o("99d9"),m=o("12b2"),v=o("169a"),L=o("132d"),g=o("a722"),w=o("9910"),$=Object(p["a"])(u,i,r,!1,null,null,null);t["a"]=$.exports;y()($,{VBtn:f["a"],VCard:h["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:m["a"],VDialog:v["a"],VIcon:L["a"],VLayout:g["a"],VSpacer:w["a"]})},"39e4":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"ma-4"},[o("repository-editor",{attrs:{"initial-data":e.repoData},on:{"form-submit":e.onSubmit}})],1)},r=[],n=o("9ab4"),s=o("60a3"),a=o("cf2a"),c=o("f33f"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n["d"](t,e),Object.defineProperty(t.prototype,"repoId",{get:function(){return c["f"].params.repositoryId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repoData",{get:function(){return c["e"].getById(this.repoId)},enumerable:!0,configurable:!0}),t.prototype.onSubmit=function(e){return n["b"](this,void 0,void 0,function(){var t;return n["e"](this,function(o){switch(o.label){case 0:return[4,c["e"].updateRepository(e)];case 1:return t=o.sent(),t&&t.payload&&this.$router.replace({path:"/repositories/"+t.payload.repo.id}),[2]}})})},t=n["c"]([Object(s["a"])({components:{RepositoryEditor:a["a"]}})],t),t}(Object(s["d"])()),u=l,p=u,d=o("2877"),y=Object(d["a"])(p,i,r,!1,null,null,null);t["default"]=y.exports},cf2a:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-select",{attrs:{items:e.repositoryTypes,label:e.$t("repository-editor.repository-type"),required:"",rules:e.validateRules.repoType},model:{value:e.repoType,callback:function(t){e.repoType=t},expression:"repoType"}}),o("v-text-field",{attrs:{rules:e.validateRules.name,counter:e.maxNameLength,label:e.$t("repository-editor.name"),required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),o("v-text-field",{attrs:{rules:e.validateRules.password,counter:e.maxPasswordLength,label:e.$t("repository-editor.password"),required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("v-text-field",{attrs:{rules:e.validateRules.location,label:e.$t("repository-editor.location"),required:"",placeholder:e.isLocalRepository?"C:/path/to/repository":"http://localhost:9000/backup-bucket"},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),e.isLocalRepository?o("v-btn",{on:{click:function(t){e.locationSelectorOpen=!0}}},[e._v(e._s(e.$t("repository-editor.select-location")))]):e._e(),o("folder-selector-dialog",{attrs:{initialLocation:e.location},on:{"folder-selected":function(t){e.location=t}},model:{value:e.locationSelectorOpen,callback:function(t){e.locationSelectorOpen=t},expression:"locationSelectorOpen"}}),o("v-slide-y-transition",{attrs:{group:""}},[e.isLocalRepository?e._e():o("v-text-field",{key:"s3AccessKey",attrs:{counter:20,rules:e.validateRules.s3AccessKey,label:e.$t("repository-editor.s3-access-key"),required:"",placeholder:"S3EX4MPL3KEYASDFGHJK"},model:{value:e.s3AccessKey,callback:function(t){e.s3AccessKey=t},expression:"s3AccessKey"}}),e.isLocalRepository?e._e():o("v-text-field",{key:"s3SecretKey",attrs:{counter:40,rules:e.validateRules.s3SecretKey,label:e.$t("repository-editor.s3-secret-key"),required:"",type:"password",placeholder:"aS3exaMPLeSeCRE7ACCessK3y+qWertYuI/pzyxC"},model:{value:e.s3SecretKey,callback:function(t){e.s3SecretKey=t},expression:"s3SecretKey"}})],1),o("v-text-field",{attrs:{rules:e.validateRules.autoUnlockDelay,label:e.$t("repository-editor.auto-unlock-delay"),required:""},model:{value:e.autoUnlockDelay,callback:function(t){e.autoUnlockDelay=t},expression:"autoUnlockDelay"}}),o("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v(e._s(e.$t("common.interaction.submit")))]),o("v-btn",{on:{click:e.clear}},[e._v(e._s(e.$t("common.interaction.reset")))])],1)},r=[],n=o("9ab4"),s=o("60a3"),a=o("f90c"),c=o("845e"),l=o("38ec"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxNameLength=100,t.maxPasswordLength=100,t.valid=!0,t.name="",t.password="",t.location="",t.s3AccessKey="",t.s3SecretKey="",t.repoType=c["RepoType"].S3,t.autoUnlockDelay=100,t.locationSelectorOpen=!1,t}return n["d"](t,e),t.prototype.trimAccessKey=function(){this.s3AccessKey.length>20&&(this.s3AccessKey=this.s3AccessKey.substr(0,20))},t.prototype.trimSecretKey=function(){this.s3SecretKey.length>40&&(this.s3SecretKey=this.s3SecretKey.substr(0,40))},t.prototype.updateLocalData=function(){this.name=this.initialData.name,this.password=this.initialData.password,this.location=this.initialData.location,this.s3AccessKey=this.initialData.s3AccessKey,this.s3SecretKey=this.initialData.s3SecretKey,this.repoType=this.initialData.type,this.autoUnlockDelay=this.initialData.autoUnlockDelay},Object.defineProperty(t.prototype,"isLocalRepository",{get:function(){return this.repoType===c["RepoType"].Local},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"repositoryTypes",{get:function(){return[{text:this.$t("repository-editor.type.s3"),value:c["RepoType"].S3},{text:this.$t("repository-editor.type.local"),value:c["RepoType"].Local}]},enumerable:!0,configurable:!0}),t.prototype.submit=function(){return n["b"](this,void 0,void 0,function(){return n["e"](this,function(e){return this.$refs.form.validate()&&this.formSubmit({name:this.name,password:this.password,location:this.location,s3AccessKey:this.s3AccessKey,s3SecretKey:this.s3SecretKey,id:this.initialData.id,type:this.repoType,autoUnlockDelay:this.autoUnlockDelay}),[2]})})},t.prototype.formSubmit=function(e){},t.prototype.clear=function(){return n["b"](this,void 0,void 0,function(){var e=this;return n["e"](this,function(t){return this.$nextTick(function(){e.updateLocalData()}),[2]})})},Object.defineProperty(t.prototype,"validateRules",{get:function(){var e=this;return{s3AccessKey:[function(t){return!!t||e.$t("repository-editor.s3-access-key-required")},function(t){return t&&/^([A-Z0-9]{20})$/g.test(t)||e.$t("repository-editor.s3-access-key-invalid")}],s3SecretKey:[function(t){return!!t||e.$t("repository-editor.s3-secret-key-required")},function(t){return t&&/^([A-Za-z0-9\/+=]{40})$/g.test(t)||e.$t("repository-editor.s3-secret-key-invalid")}],location:[function(t){return!!t||e.$t("repository-editor.location-required")},function(t){return e.isLocalRepository||t&&Object(a["isURL"])(t,{require_tld:!1})||e.$t("repository-editor.invalid-url")}],password:[function(t){return!!t||e.$t("repository-editor.password-required")},function(t){return t&&t.length<=e.maxPasswordLength||e.$t("repository-editor.password-length",{length:e.maxPasswordLength})}],name:[function(t){return!!t||e.$t("repository-editor.name-required")},function(t){return t&&t.length<=e.maxNameLength||e.$t("repository-editor.name-length",{length:e.maxPasswordLength})}],repoType:[function(t){return!!t||e.$t("repository-editor.type-required")}],autoUnlockDelay:[function(t){return!!t||e.$t("repository-editor.auto-unlock-delay-required")}]}},enumerable:!0,configurable:!0}),n["c"]([Object(s["g"])("s3AccessKey")],t.prototype,"trimAccessKey",null),n["c"]([Object(s["g"])("s3SecretKey")],t.prototype,"trimSecretKey",null),n["c"]([Object(s["e"])({type:Object,default:function(){return{name:"",password:"",location:"",s3AccessKey:"",s3SecretKey:"",type:c["RepoType"].S3,autoUnlockDelay:100}}})],t.prototype,"initialData",void 0),n["c"]([Object(s["g"])("initialData",{immediate:!0})],t.prototype,"updateLocalData",null),n["c"]([Object(s["b"])("form-submit")],t.prototype,"formSubmit",null),t=n["c"]([Object(s["a"])({components:{FolderSelectorDialog:l["a"]}})],t),t}(Object(s["d"])()),p=u,d=p,y=o("2877"),f=o("6544"),h=o.n(f),b=o("8336"),m=o("4bd4"),v=o("b56d"),L=o("0789"),g=o("2677"),w=Object(y["a"])(d,i,r,!1,null,null,null);t["a"]=w.exports;h()(w,{VBtn:b["a"],VForm:m["a"],VSelect:v["a"],VSlideYTransition:L["g"],VTextField:g["a"]})}}]);
//# sourceMappingURL=edit-repository.b40a1e37.js.map